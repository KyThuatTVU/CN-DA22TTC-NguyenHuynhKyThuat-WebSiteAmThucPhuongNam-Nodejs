<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè H√†ng - Nh√† h√†ng Ph∆∞∆°ng Nam Vƒ©nh Long</title>
    <link rel="icon" type="image/png" href="images/Green Simple Clean Vegan Food Logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/modern-style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/loading.css">
    <style>
        .cart-badge {
            top: -8px;
            right: -8px;
            min-width: 20px;
            height: 20px;
        }
        
        /* Mobile Cart Improvements */
        @media (max-width: 639px) {
            .cart-item-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .cart-item-image {
                width: 100%;
                height: 150px;
                object-fit: cover;
                border-radius: 0.5rem;
            }
            
            .cart-item-details {
                width: 100%;
            }
            
            .cart-quantity-controls {
                justify-content: space-between;
                width: 100%;
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-orange-50 via-red-50 to-yellow-50">
    <!-- Navigation Bar -->
    <nav id="navbar" class="fixed w-full top-0 z-50 bg-white shadow-md transition-all duration-300">
        <div class="container mx-auto px-3 sm:px-4">
            <div class="flex items-center justify-between h-16 sm:h-18 md:h-20">
                <!-- Logo - Responsive Design -->
                <a href="index.html" class="flex items-center space-x-2 sm:space-x-3 md:space-x-4 group">
                    <!-- Logo Image -->
                    <img src="images/Green Simple Clean Vegan Food Logo.png" alt="Ph∆∞∆°ng Nam Logo"
                        class="w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 object-cover rounded-full border-2 border-orange-500 shadow-md group-hover:scale-110 transition-transform duration-300">

                    <!-- Logo Text -->
                    <div class="flex flex-col">
                        <h1
                            class="font-dancing text-lg sm:text-2xl md:text-3xl font-bold text-gray-800 group-hover:text-orange-600 transition-colors leading-tight">
                            Ph∆∞∆°ng Nam
                        </h1>
                        <p class="text-xs sm:text-sm text-gray-600 tracking-wide hidden xs:block">H∆∞∆°ng v·ªã Vƒ©nh Long</p>
                    </div>
                </a>



                <!-- Desktop Menu -->
                <div class="hidden lg:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-home mr-1"></i> Trang ch·ªß
                    </a>
                    <a href="gioi-thieu.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-info-circle mr-1"></i> Gi·ªõi thi·ªáu
                    </a>
                    <a href="tin-tuc.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-newspaper mr-1"></i> Tin t·ª©c
                    </a>
                    <a href="album.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-images mr-1"></i> Album ·∫£nh
                    </a>
                    <a href="thuc-don.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-book-open mr-1"></i> Th·ª±c ƒë∆°n
                    </a>
                    <a href="dat-ban.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-calendar-check mr-1"></i> ƒê·∫∑t b√†n
                    </a>
                    <a href="lien-he.html" class="text-gray-800 hover:text-orange-600 transition font-medium">
                        <i class="fas fa-phone mr-1"></i> Li√™n h·ªá
                    </a>
                </div>

                <!-- Right Side Actions -->
                <div class="hidden lg:flex items-center space-x-4">
                    <!-- Search -->
                    <button class="text-gray-700 hover:text-orange-600 transition">
                        <i class="fas fa-search text-xl"></i>
                    </button>

                    <!-- Cart -->
                    <a href="gio-hang.html" class="relative text-gray-700 hover:text-orange-600 transition">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-badge"
                            class="absolute -top-2 -right-2 bg-orange-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
                    </a>

                    <!-- User Menu - Dynamic Container -->
                    <div id="user-menu-container">
                        <!-- Will be populated by JavaScript -->
                        <div class="relative group">
                            <button class="text-gray-700 hover:text-orange-600 transition">
                                <i class="fas fa-user text-xl"></i>
                            </button>
                            <div
                                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 border border-gray-100">
                                <a href="dang-nhap.html"
                                    class="block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600">
                                    <i class="fas fa-sign-in-alt mr-2"></i> ƒêƒÉng nh·∫≠p
                                </a>
                                <a href="dang-ky.html"
                                    class="block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600">
                                    <i class="fas fa-user-plus mr-2"></i> ƒêƒÉng k√Ω
                                </a>
                                <a href="admin/login-simple.html"
                                    class="block px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600">
                                    <i class="fas fa-user-shield mr-2"></i> Qu·∫£n tr·ªã
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Actions (Cart + Menu) -->
                <div class="lg:hidden flex items-center space-x-3 sm:space-x-4">
                    <!-- Cart Icon for Mobile -->
                    <a href="gio-hang.html" class="relative text-gray-700 hover:text-orange-600 transition">
                        <i class="fas fa-shopping-cart text-xl sm:text-2xl"></i>
                        <span id="cart-badge-mobile"
                            class="absolute -top-1 -right-1 sm:-top-2 sm:-right-2 bg-orange-600 text-white text-xs w-4 h-4 sm:w-5 sm:h-5 rounded-full flex items-center justify-center font-bold">0</span>
                    </a>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn"
                        class="text-gray-700 text-xl sm:text-2xl p-2 hover:text-orange-600 transition">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="lg:hidden hidden bg-white border-t border-gray-200 shadow-md rounded-b-lg pb-4">
                <a href="index.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-home mr-2"></i> Trang ch·ªß
                </a>
                <a href="gioi-thieu.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-info-circle mr-2"></i> Gi·ªõi thi·ªáu
                </a>
                <a href="tin-tuc.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-newspaper mr-2"></i> Tin t·ª©c
                </a>
                <a href="album.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-images mr-2"></i> Album
                </a>
                <a href="thuc-don.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-book-open mr-2"></i> Th·ª±c ƒë∆°n
                </a>
                <a href="dat-ban.html"
                    class="block py-3 px-4 text-white bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 transition font-bold rounded-lg my-2 mx-4 text-center shadow-md">
                    <i class="fas fa-calendar-check mr-2"></i> ƒê·∫∑t b√†n
                </a>
                <a href="lien-he.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-envelope mr-2"></i> Li√™n h·ªá
                </a>
                <a href="gio-hang.html"
                    class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                    <i class="fas fa-shopping-cart mr-2"></i> Gi·ªè h√†ng
                </a>
                <hr class="my-2">
                <!-- Mobile User Menu - Dynamic -->
                <div id="mobile-user-menu">
                    <a href="dang-nhap.html"
                        class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                        <i class="fas fa-sign-in-alt mr-2"></i> ƒêƒÉng nh·∫≠p
                    </a>
                    <a href="dang-ky.html"
                        class="block py-3 px-4 text-gray-800 hover:text-orange-600 hover:bg-orange-50 transition font-medium">
                        <i class="fas fa-user-plus mr-2"></i> ƒêƒÉng k√Ω
                    </a>
                </div>
            </div>
        </div>
    </nav>


    <!-- Page Header - Christmas Theme -->
    <section class="relative text-white py-12 sm:py-16 md:py-20 overflow-hidden" style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #0ea5e9 100%);">
        <!-- Snow falling effect on header -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="snow-header"></div>
        </div>
        
        <!-- Moon -->
        <div class="absolute top-4 right-[10%] sm:right-[15%] w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-full shadow-lg opacity-90" style="box-shadow: 0 0 30px rgba(255,255,200,0.5);"></div>
        
        <!-- Christmas Trees - Left side -->
        <div class="absolute bottom-0 left-[5%] text-3xl sm:text-4xl md:text-5xl" style="filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));">üéÑ</div>
        <div class="absolute bottom-0 left-[12%] text-2xl sm:text-3xl md:text-4xl hidden sm:block" style="filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));">üéÑ</div>
        
        <!-- Christmas Trees - Right side -->
        <div class="absolute bottom-0 right-[5%] text-3xl sm:text-4xl md:text-5xl" style="filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));">üéÑ</div>
        <div class="absolute bottom-0 right-[12%] text-2xl sm:text-3xl md:text-4xl hidden sm:block" style="filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));">üéÑ</div>
        
        <!-- Santa with Sleigh and Reindeer -->
        <div class="absolute top-[20%] right-[20%] sm:right-[25%] flex items-center gap-1 animate-bounce" style="animation-duration: 3s;">
            <span class="text-2xl sm:text-3xl md:text-4xl">ü¶å</span>
            <span class="text-2xl sm:text-3xl md:text-4xl">üõ∑</span>
            <span class="text-2xl sm:text-3xl md:text-4xl">üéÖ</span>
        </div>
        
        <!-- Additional Reindeer -->
        <div class="absolute top-[35%] left-[15%] text-xl sm:text-2xl animate-pulse hidden md:block">ü¶å</div>
        
        <!-- Snowflakes decoration -->
        <div class="absolute top-[15%] left-[25%] text-white/60 text-lg sm:text-xl animate-pulse">‚ùÑ</div>
        <div class="absolute top-[25%] left-[40%] text-white/50 text-base sm:text-lg animate-pulse" style="animation-delay: 0.5s;">‚ùÑ</div>
        <div class="absolute top-[10%] right-[35%] text-white/60 text-xl sm:text-2xl animate-pulse" style="animation-delay: 1s;">‚ùÑ</div>
        <div class="absolute top-[30%] right-[45%] text-white/40 text-sm sm:text-base animate-pulse" style="animation-delay: 0.3s;">‚ùÑ</div>
        
        <!-- Stars -->
        <div class="absolute top-[8%] left-[30%] text-yellow-300/80 text-xs sm:text-sm animate-pulse">‚ú®</div>
        <div class="absolute top-[12%] right-[40%] text-yellow-300/70 text-xs animate-pulse" style="animation-delay: 0.7s;">‚ú®</div>
        
        <div class="container mx-auto px-4 text-center relative z-10">
            <!-- Title with Christmas emoji -->
            <h1 class="font-dancing text-3xl sm:text-4xl md:text-5xl font-bold mb-2 sm:mb-3 drop-shadow-lg flex items-center justify-center gap-2 sm:gap-3">
                <span class="text-2xl sm:text-3xl">üéÑ</span>
                <span>Gi·ªè H√†ng C·ªßa T√¥i</span>
                <span class="text-2xl sm:text-3xl">üéÖ</span>
            </h1>
            
            <!-- Subtitle with Christmas message -->
            <p class="text-sm sm:text-base md:text-lg text-white/90 flex items-center justify-center gap-2 flex-wrap">
                <span class="text-red-400">üéÅ</span>
                <span>Qu·∫£n l√Ω th√¥ng tin v√† ƒë∆°n h√†ng c·ªßa b·∫°n - Ch√∫c Gi√°ng Sinh An L√†nh!</span>
                <span class="text-yellow-400">‚≠ê</span>
            </p>
            
            <!-- Breadcrumb -->
            <div class="mt-3 sm:mt-4 flex items-center justify-center gap-2 text-xs sm:text-sm text-white/80">
                <a href="index.html" class="hover:text-white transition flex items-center gap-1">
                    <i class="fas fa-home"></i>
                    <span>Trang ch·ªß</span>
                </a>
                <i class="fas fa-chevron-right text-xs"></i>
                <span class="text-white font-medium">Gi·ªè h√†ng</span>
            </div>
        </div>
        
        <!-- Bottom snowy ground -->
        <div class="absolute bottom-0 left-0 right-0 h-4 sm:h-6 bg-gradient-to-t from-white/30 to-transparent"></div>
        
        <!-- Bottom Wave -->
        <div class="absolute bottom-0 left-0 right-0">
            <svg viewBox="0 0 1440 60" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto">
                <path d="M0 60L60 55C120 50 240 40 360 35C480 30 600 30 720 33.3C840 36.7 960 43.3 1080 45C1200 46.7 1320 43.3 1380 41.7L1440 40V60H1380C1320 60 1200 60 1080 60C960 60 840 60 720 60C600 60 480 60 360 60C240 60 120 60 60 60H0Z" fill="#FFF7ED"/>
            </svg>
        </div>
    </section>
    
    <style>
        /* Snow animation for header */
        .snow-header {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, white, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, white, transparent),
                radial-gradient(2px 2px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 160px 30px, white, transparent),
                radial-gradient(2px 2px at 200px 60px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 250px 20px, white, transparent),
                radial-gradient(2px 2px at 300px 50px, rgba(255,255,255,0.8), transparent);
            background-size: 350px 100px;
            animation: snowfall-header 8s linear infinite;
            opacity: 0.6;
        }
        
        @keyframes snowfall-header {
            0% { background-position: 0 0; }
            100% { background-position: 350px 100px; }
        }
    </style>

    <!-- Cart Content -->
    <section class="py-6 sm:py-8 md:py-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8">
                <!-- Cart Items -->
                <div class="w-full lg:w-2/3">
                    <div class="bg-white rounded-xl shadow-sm p-4 sm:p-6">
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
                            <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center">
                                <i class="fas fa-shopping-cart mr-2 sm:mr-3 text-orange-600"></i>
                                Gi·ªè h√†ng c·ªßa b·∫°n
                            </h2>
                            <div class="flex flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto">
                                <div class="flex items-center space-x-2 bg-orange-100 px-3 sm:px-4 py-2 rounded-lg">
                                    <i class="fas fa-box text-orange-600 text-sm"></i>
                                    <span class="font-semibold text-orange-800 text-sm sm:text-base">
                                        <span id="cart-count">0</span> s·∫£n ph·∫©m
                                    </span>
                                </div>
                                <button onclick="clearCart()"
                                    class="bg-red-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-red-600 transition text-xs sm:text-sm flex items-center shadow-md hover:shadow-lg">
                                    <i class="fas fa-trash mr-1 sm:mr-2"></i>
                                    <span class="hidden xs:inline">X√≥a to√†n b·ªô</span>
                                    <span class="xs:hidden">X√≥a</span>
                                </button>
                            </div>
                        </div>
                        <div id="cart-items">
                            <!-- Cart items will be rendered here by cartManager -->
                        </div>
                        <div id="empty-cart" class="text-center py-12 hidden">
                            <div class="inline-block mb-4">
                                <i class="fas fa-shopping-cart text-6xl text-gray-300"></i>
                            </div>
                            <p class="text-gray-500 text-xl mb-4">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>
                            <a href="thuc-don.html"
                                class="inline-block bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition">
                                Ti·∫øp t·ª•c mua s·∫Øm
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="w-full lg:w-1/3">
                    <div class="bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:sticky lg:top-24">
                        <h3 class="text-lg sm:text-xl font-bold mb-4 sm:mb-6">T√≥m t·∫Øt ƒë∆°n h√†ng</h3>

                        <div class="space-y-4 mb-6">
                            <div class="flex justify-between items-center py-3">
                                <span class="text-gray-700 font-medium flex items-center">
                                    <i class="fas fa-shopping-bag mr-2 text-orange-500"></i>
                                    T·∫°m t√≠nh
                                </span>
                                <span id="subtotal" class="text-gray-400 font-semibold">0ƒë</span>
                            </div>
                            <div class="flex justify-between items-center py-3">
                                <span class="text-gray-700 font-medium flex items-center">
                                    <i class="fas fa-truck mr-2 text-blue-500"></i>
                                    Ph√≠ giao h√†ng
                                </span>
                                <span id="shipping" class="text-gray-400">0ƒë</span>
                            </div>
                            <div class="flex justify-between items-center py-3">
                                <span class="text-gray-700 font-medium flex items-center">
                                    <i class="fas fa-tags mr-2 text-green-500"></i>
                                    Gi·∫£m gi√°
                                </span>
                                <span id="discount" class="text-gray-400">-0ƒë</span>
                            </div>
                            <div class="border-t-2 border-orange-200 pt-4 flex justify-between items-center">
                                <span class="text-lg font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-calculator mr-2 text-orange-600"></i>
                                    T·ªïng c·ªông
                                </span>
                                <div id="total" class="text-right">
                                    <span class="text-2xl font-bold text-gray-400">0ƒë</span>
                                    <div class="text-sm text-gray-500 mt-1">Gi·ªè h√†ng tr·ªëng</div>
                                </div>
                            </div>
                        </div>

                        <a href="thanh-toan.html" id="checkout-btn"
                            class="block w-full bg-gradient-to-r from-orange-600 to-red-600 text-white text-center py-3 sm:py-4 rounded-xl font-bold text-base sm:text-lg hover:from-orange-700 hover:to-red-700 transition-all duration-300 mb-3 shadow-lg hover:shadow-xl transform hover:scale-105 opacity-50 cursor-not-allowed pointer-events-none">
                            <i class="fas fa-credit-card mr-2 sm:mr-3"></i>
                            <span class="hidden sm:inline">Ti·∫øn h√†nh thanh to√°n</span>
                            <span class="sm:hidden">Thanh to√°n</span>
                            <i class="fas fa-arrow-right ml-2 sm:ml-3"></i>
                        </a>
                        <a href="thuc-don.html"
                            class="block w-full bg-gray-100 text-gray-700 text-center py-2.5 sm:py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors border-2 border-gray-200 hover:border-gray-300 text-sm sm:text-base">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span class="hidden sm:inline">Ti·∫øp t·ª•c mua s·∫Øm</span>
                            <span class="sm:hidden">Mua th√™m</span>
                        </a>

                        <!-- Trust Badges -->
                        <div class="mt-6 pt-6 border-t space-y-3">
                            <div class="flex items-center text-sm text-gray-600">
                                <i class="fas fa-shield-alt text-green-500 mr-2"></i>
                                Thanh to√°n an to√†n & b·∫£o m·∫≠t
                            </div>
                            <div class="flex items-center text-sm text-gray-600">
                                <i class="fas fa-truck text-blue-500 mr-2"></i>
                                Giao h√†ng nhanh ch√≥ng
                            </div>
                            <div class="flex items-center text-sm text-gray-600">
                                <i class="fas fa-undo text-orange-500 mr-2"></i>
                                Ho√†n ti·ªÅn trong 24h
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ML Pairing Recommendations - G·ª£i √Ω k·∫øt h·ª£p m√≥n -->
    <section id="pairing-section" class="py-8 bg-gradient-to-r from-orange-50 to-amber-50 hidden">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-2">
                        <span class="text-2xl">üçΩÔ∏è</span> K·∫øt h·ª£p ho√†n h·∫£o
                    </h2>
                    <p class="text-sm text-gray-500 mt-1">G·ª£i √Ω m√≥n ƒÉn ph√π h·ª£p v·ªõi gi·ªè h√†ng c·ªßa b·∫°n</p>
                </div>
                <button onclick="loadPairingRecommendations()" class="text-orange-600 hover:text-orange-700 text-sm">
                    <i class="fas fa-sync-alt mr-1"></i> L√†m m·ªõi
                </button>
            </div>
            <div id="pairing-recommendations" class="flex gap-4 overflow-x-auto pb-4">
                <!-- Loading skeleton -->
                <div class="flex-shrink-0 w-44 animate-pulse">
                    <div class="bg-white rounded-xl overflow-hidden shadow">
                        <div class="bg-gray-200 h-28"></div>
                        <div class="p-3">
                            <div class="h-4 bg-gray-200 rounded mb-2"></div>
                            <div class="h-3 bg-gray-200 rounded w-2/3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recommended Products - ML Based -->
    <section class="py-12 bg-gradient-to-b from-white to-orange-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-8">
                <h2 class="font-dancing text-3xl sm:text-4xl font-bold text-gray-800 mb-2">
                    <span class="text-3xl mr-2">‚ú®</span>G·ª£i √Ω d√†nh cho b·∫°n
                </h2>
                <p class="text-gray-500">D·ª±a tr√™n s·ªü th√≠ch v√† l·ªãch s·ª≠ c·ªßa b·∫°n</p>
            </div>
            <div id="recommended-products" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
                <!-- Loading skeleton -->
                <div class="animate-pulse bg-white rounded-xl overflow-hidden shadow">
                    <div class="bg-gray-200 h-40 sm:h-48"></div>
                    <div class="p-4">
                        <div class="h-4 bg-gray-200 rounded mb-2"></div>
                        <div class="h-4 bg-gray-200 rounded w-2/3"></div>
                    </div>
                </div>
                <div class="animate-pulse bg-white rounded-xl overflow-hidden shadow">
                    <div class="bg-gray-200 h-40 sm:h-48"></div>
                    <div class="p-4">
                        <div class="h-4 bg-gray-200 rounded mb-2"></div>
                        <div class="h-4 bg-gray-200 rounded w-2/3"></div>
                    </div>
                </div>
                <div class="animate-pulse bg-white rounded-xl overflow-hidden shadow hidden md:block">
                    <div class="bg-gray-200 h-40 sm:h-48"></div>
                    <div class="p-4">
                        <div class="h-4 bg-gray-200 rounded mb-2"></div>
                        <div class="h-4 bg-gray-200 rounded w-2/3"></div>
                    </div>
                </div>
                <div class="animate-pulse bg-white rounded-xl overflow-hidden shadow hidden lg:block">
                    <div class="bg-gray-200 h-40 sm:h-48"></div>
                    <div class="p-4">
                        <div class="h-4 bg-gray-200 rounded mb-2"></div>
                        <div class="h-4 bg-gray-200 rounded w-2/3"></div>
                    </div>
                </div>
            </div>
            
            <!-- View More Button -->
            <div class="text-center mt-8">
                <a href="thuc-don.html" class="inline-flex items-center gap-2 bg-orange-600 text-white px-6 py-3 rounded-full hover:bg-orange-700 transition shadow-lg hover:shadow-xl">
                    <span>Xem t·∫•t c·∫£ m√≥n ƒÉn</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>
    
    <script>
    // Load ML-based pairing recommendations
    async function loadPairingRecommendations() {
        const section = document.getElementById('pairing-section');
        const container = document.getElementById('pairing-recommendations');
        
        if (!section || !container) return;
        
        // L·∫•y danh s√°ch m√≥n trong gi·ªè h√†ng
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const dishIds = cart.map(item => item.id).filter(Boolean);
        
        if (dishIds.length === 0) {
            section.classList.add('hidden');
            return;
        }
        
        try {
            if (typeof RecommendationSystem === 'undefined') {
                console.warn('RecommendationSystem not loaded');
                return;
            }
            
            const recommendations = await RecommendationSystem.getPairingRecommendations(dishIds);
            
            if (recommendations.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            
            container.innerHTML = recommendations.map(dish => {
                let imagePath = dish.anh_mon || 'default-food.jpg';
                if (!imagePath.startsWith('http') && !imagePath.startsWith('/images/')) {
                    imagePath = '/images/' + imagePath.replace(/^\/+/, '');
                }
                const imageUrl = imagePath.startsWith('http') ? imagePath : `http://localhost:3000${imagePath}`;
                const price = new Intl.NumberFormat('vi-VN').format(dish.gia_tien);
                
                return `
                    <div class="flex-shrink-0 w-44">
                        <div class="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all transform hover:-translate-y-1">
                            <a href="chitietmonan.html?id=${dish.ma_mon}" class="block">
                                <div class="relative">
                                    <img src="${imageUrl}" alt="${dish.ten_mon}" 
                                         class="w-full h-28 object-cover"
                                         onerror="this.src='images/default-food.jpg'">
                                    <span class="absolute top-2 left-2 bg-orange-500 text-white px-2 py-0.5 rounded-full text-xs">
                                        üçΩÔ∏è K·∫øt h·ª£p
                                    </span>
                                </div>
                            </a>
                            <div class="p-3">
                                <h4 class="font-medium text-sm text-gray-800 line-clamp-1 mb-1">${dish.ten_mon}</h4>
                                <p class="text-xs text-gray-500 line-clamp-1 mb-2">${dish.reason || ''}</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-orange-600 font-bold text-sm">${price}ƒë</span>
                                    <button onclick="addToCartFromRecommendation(${dish.ma_mon}, '${dish.ten_mon.replace(/'/g, "\\'")}', ${dish.gia_tien}, '${imageUrl}')"
                                            class="bg-orange-500 text-white w-7 h-7 rounded-full hover:bg-orange-600 transition text-xs">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
        } catch (error) {
            console.error('Error loading pairing recommendations:', error);
            section.classList.add('hidden');
        }
    }
    
    // Load ML-based general recommendations
    async function loadMLRecommendations() {
        const container = document.getElementById('recommended-products');
        if (!container) return;
        
        try {
            if (typeof RecommendationSystem === 'undefined') {
                console.warn('RecommendationSystem not loaded, waiting...');
                setTimeout(loadMLRecommendations, 500);
                return;
            }
            
            const recommendations = await RecommendationSystem.getRecommendations(8);
            
            if (recommendations.length > 0) {
                RecommendationSystem.renderList(recommendations, 'recommended-products');
            }
        } catch (error) {
            console.error('Error loading ML recommendations:', error);
        }
    }
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(() => {
            loadPairingRecommendations();
            loadMLRecommendations();
        }, 800);
    });
    </script>

    <!-- Footer Container -->
    <div id="footer-container"></div>
    <!-- Chatbot Container -->
    <div id="chatbot-container"></div>

    <!-- Scripts -->
    <script src="js/loading.js"></script>
    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/recommendation.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/load-components.js"></script>

    <!-- Cart Page Initialization -->
    <script>
        // Initialize cart page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üõí Initializing cart page...');

            // Wait for cartManager to be available
            const checkCartManager = setInterval(() => {
                if (typeof cartManager !== 'undefined') {
                    clearInterval(checkCartManager);
                    console.log('‚úÖ CartManager found, loading cart data...');

                    // Load cart data and render
                    loadAndRenderCart();
                }
            }, 100);

            // Set timeout in case cartManager doesn't load
            setTimeout(() => {
                clearInterval(checkCartManager);
                console.warn('‚è∞ CartManager not loaded within 5 seconds');
            }, 5000);
        });

        // Function to load and render cart
        async function loadAndRenderCart() {
            try {
                const emptyCart = document.getElementById('empty-cart');
                const cartItems = document.getElementById('cart-items');
                
                // Ki·ªÉm tra ƒëƒÉng nh·∫≠p tr∆∞·ªõc
                if (!cartManager.isAuthenticated()) {
                    console.log('üë§ User not authenticated');
                    
                    // Hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu ƒëƒÉng nh·∫≠p
                    if (emptyCart) {
                        emptyCart.innerHTML = `
                            <div class="inline-block mb-4">
                                <i class="fas fa-user-lock text-6xl text-gray-300"></i>
                            </div>
                            <p class="text-gray-500 text-xl mb-2">Vui l√≤ng ƒëƒÉng nh·∫≠p</p>
                            <p class="text-gray-400 text-sm mb-4">ƒêƒÉng nh·∫≠p ƒë·ªÉ xem v√† qu·∫£n l√Ω gi·ªè h√†ng c·ªßa b·∫°n</p>
                            <a href="dang-nhap.html?redirect=gio-hang.html"
                                class="inline-block bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition mr-2">
                                <i class="fas fa-sign-in-alt mr-2"></i>ƒêƒÉng nh·∫≠p
                            </a>
                            <a href="thuc-don.html"
                                class="inline-block bg-gray-200 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-300 transition">
                                Xem th·ª±c ƒë∆°n
                            </a>
                        `;
                        emptyCart.classList.remove('hidden');
                    }
                    if (cartItems) cartItems.innerHTML = '';
                    updateCartTotals();
                    return;
                }
                
                // Load cart data
                await cartManager.loadCart();
                console.log('üì¶ Cart data loaded:', cartManager.getCart());

                // Render cart items
                cartManager.renderCartItems('cart-items');
                console.log('üé® Cart items rendered');

                // Update cart count in header
                const cartCount = document.getElementById('cart-count');
                if (cartCount) {
                    cartCount.textContent = cartManager.getCart().so_luong || 0;
                }

                // Update totals
                updateCartTotals();

                // Show/hide empty cart message
                if (emptyCart && cartItems) {
                    const itemCount = cartManager.getCart().items.length;
                    console.log('üìä Cart has', itemCount, 'items');

                    if (itemCount === 0) {
                        // Reset v·ªÅ n·ªôi dung m·∫∑c ƒë·ªãnh cho gi·ªè h√†ng tr·ªëng
                        emptyCart.innerHTML = `
                            <div class="inline-block mb-4">
                                <i class="fas fa-shopping-cart text-6xl text-gray-300"></i>
                            </div>
                            <p class="text-gray-500 text-xl mb-4">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>
                            <a href="thuc-don.html"
                                class="inline-block bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition">
                                Ti·∫øp t·ª•c mua s·∫Øm
                            </a>
                        `;
                        emptyCart.classList.remove('hidden');
                        cartItems.innerHTML = '';
                        console.log('üì≠ Showing empty cart message');
                    } else {
                        emptyCart.classList.add('hidden');
                        console.log('üõçÔ∏è Showing cart items');
                    }
                }
            } catch (error) {
                console.error('‚ùå Error loading cart:', error);
            }
        }

        // Function to refresh cart (can be called from other scripts)
        window.refreshCart = function() {
            console.log('üîÑ Refreshing cart...');
            loadAndRenderCart();
        };

        // Refresh cart when page becomes visible (user navigates back to cart page)
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('üëÄ Cart page became visible, refreshing...');
                loadAndRenderCart();
            }
        });

        // Also refresh on focus
        window.addEventListener('focus', function() {
            console.log('üéØ Cart page focused, refreshing...');
            loadAndRenderCart();
        });

        // Function to update cart totals
        function updateCartTotals() {
            const cart = cartManager.getCart();
            const subtotal = cart.tong_tien || 0;
            const itemCount = cart.items ? cart.items.length : 0;
            
            // Kh√¥ng t√≠nh ph√≠ ship khi gi·ªè h√†ng tr·ªëng ho·∫∑c free ship t·ª´ 150k
            let shipping = 0;
            if (itemCount > 0) {
                shipping = subtotal >= 150000 ? 0 : 30000; // Free shipping t·ª´ 150k (ƒë·ªìng b·ªô v·ªõi checkout.js)
            }
            
            const discount = 0; // TODO: Implement voucher system
            const total = subtotal + shipping - discount;

            // Update subtotal with better formatting
            const subtotalElement = document.getElementById('subtotal');
            if (subtotalElement) {
                if (itemCount === 0) {
                    subtotalElement.innerHTML = `
                        <span class="text-lg font-semibold text-gray-400">0ƒë</span>
                    `;
                } else {
                    subtotalElement.innerHTML = `
                        <span class="text-lg font-semibold text-gray-800">${formatPrice(subtotal)}</span>
                    `;
                }
            }

            // Update shipping with icon and better styling
            const shippingElement = document.getElementById('shipping');
            if (shippingElement) {
                if (itemCount === 0) {
                    // Gi·ªè h√†ng tr·ªëng - kh√¥ng hi·ªÉn th·ªã ph√≠ ship
                    shippingElement.innerHTML = `
                        <span class="text-gray-400">0ƒë</span>
                    `;
                } else if (shipping === 0) {
                    // Free ship khi ƒë·ªß ƒëi·ªÅu ki·ªán
                    shippingElement.innerHTML = `
                        <span class="text-green-600 font-semibold flex items-center">
                            <i class="fas fa-truck mr-1"></i>
                            Mi·ªÖn ph√≠
                        </span>
                    `;
                } else {
                    // C√≥ ph√≠ ship
                    shippingElement.innerHTML = `
                        <span class="text-gray-700">${formatPrice(shipping)}</span>
                        <div class="text-xs text-gray-500 mt-1">Mi·ªÖn ph√≠ t·ª´ 150.000ƒë</div>
                    `;
                }
            }

            // Update discount
            const discountElement = document.getElementById('discount');
            if (discountElement) {
                if (discount === 0) {
                    discountElement.innerHTML = `
                        <span class="text-gray-400">-0ƒë</span>
                    `;
                } else {
                    discountElement.innerHTML = `
                        <span class="text-green-600 font-semibold">-${formatPrice(discount)}</span>
                    `;
                }
            }

            // Update total with prominent styling
            const totalElement = document.getElementById('total');
            if (totalElement) {
                if (itemCount === 0) {
                    totalElement.innerHTML = `
                        <span class="text-2xl font-bold text-gray-400">0ƒë</span>
                        <div class="text-sm text-gray-500 mt-1">Gi·ªè h√†ng tr·ªëng</div>
                    `;
                } else {
                    totalElement.innerHTML = `
                        <span class="text-2xl font-bold text-orange-600">${formatPrice(total)}</span>
                        <div class="text-sm text-gray-500 mt-1">Thanh to√°n ngay</div>
                    `;
                }
            }
            
            // Disable/enable checkout button based on cart status
            const checkoutBtn = document.getElementById('checkout-btn');
            if (checkoutBtn) {
                if (itemCount === 0) {
                    checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed', 'pointer-events-none');
                } else {
                    checkoutBtn.classList.remove('opacity-50', 'cursor-not-allowed', 'pointer-events-none');
                }
            }

            console.log('üí∞ Updated cart totals:', { subtotal, shipping, discount, total, itemCount });
        }

        // Function to clear entire cart
        function clearCart() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô gi·ªè h√†ng?')) {
                if (typeof cartManager !== 'undefined') {
                    cartManager.clearCart().then(() => {
                        location.reload(); // Reload to update UI
                    });
                }
            }
        }

        // Format price helper
        function formatPrice(price) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price);
        }

        // Load recommended products from API
        async function loadRecommendedProducts() {
            const container = document.getElementById('recommended-products');
            if (!container) return;

            try {
                // L·∫•y danh s√°ch m√≥n ƒÉn t·ª´ API
                const response = await fetch(`${window.API_URL || 'http://localhost:3000/api'}/menu`);
                const result = await response.json();

                if (result.success && result.data && result.data.length > 0) {
                    // L·∫•y c√°c m√≥n trong gi·ªè h√†ng ƒë·ªÉ lo·∫°i tr·ª´
                    let cartItemIds = [];
                    if (typeof cartManager !== 'undefined') {
                        const cart = cartManager.getCart();
                        cartItemIds = cart.items.map(item => item.ma_mon);
                    }

                    // L·ªçc b·ªè c√°c m√≥n ƒë√£ c√≥ trong gi·ªè
                    let availableProducts = result.data.filter(item => !cartItemIds.includes(item.ma_mon));
                    
                    // N·∫øu kh√¥ng c√≤n m√≥n n√†o, d√πng t·∫•t c·∫£
                    if (availableProducts.length === 0) {
                        availableProducts = result.data;
                    }

                    // Shuffle array ƒë·ªÉ random
                    const shuffled = shuffleArray([...availableProducts]);
                    
                    // L·∫•y t·ªëi ƒëa 4 m√≥n
                    renderRecommendedProducts(shuffled.slice(0, 4));
                } else {
                    container.innerHTML = '<p class="text-center text-gray-500 col-span-full">Kh√¥ng c√≥ m√≥n ƒÉn n√†o</p>';
                }
            } catch (error) {
                console.error('Error loading recommended products:', error);
                container.innerHTML = '<p class="text-center text-gray-500 col-span-full">Kh√¥ng th·ªÉ t·∫£i m√≥n ƒÉn g·ª£i √Ω</p>';
            }
        }

        // Shuffle array helper (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Render recommended products
        function renderRecommendedProducts(products) {
            const container = document.getElementById('recommended-products');
            if (!container || !products.length) return;

            container.innerHTML = products.map(item => {
                const imageSrc = item.anh_mon 
                    ? (item.anh_mon.startsWith('http') ? item.anh_mon : `http://localhost:3000${item.anh_mon}`)
                    : 'images/default-dish.jpg';
                
                const rating = item.avg_rating ? parseFloat(item.avg_rating).toFixed(1) : '0';
                const reviews = item.total_reviews || 0;

                return `
                    <div class="bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 group">
                        <a href="chitietmonan.html?id=${item.ma_mon}" class="block relative overflow-hidden">
                            <img src="${imageSrc}" 
                                 alt="${item.ten_mon}" 
                                 class="w-full h-40 sm:h-48 object-cover group-hover:scale-110 transition-transform duration-500"
                                 onerror="this.src='images/default-dish.jpg'">
                            ${item.so_luong_ton <= 5 && item.so_luong_ton > 0 ? 
                                '<span class="absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">S·∫Øp h·∫øt</span>' : ''}
                            ${item.so_luong_ton === 0 ? 
                                '<span class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">H·∫øt h√†ng</span>' : ''}
                        </a>
                        <div class="p-3 sm:p-4">
                            <a href="chitietmonan.html?id=${item.ma_mon}" class="block">
                                <h3 class="font-semibold text-gray-800 mb-1 line-clamp-1 hover:text-orange-600 transition text-sm sm:text-base">${item.ten_mon}</h3>
                            </a>
                            <div class="flex items-center gap-1 mb-2">
                                <div class="flex text-yellow-400 text-xs">
                                    ${generateStars(rating)}
                                </div>
                                <span class="text-xs text-gray-500">(${reviews})</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-orange-600 font-bold text-sm sm:text-base">${formatPrice(item.gia_tien)}</span>
                                <button onclick="addToCartFromRecommended(${item.ma_mon})" 
                                        class="bg-orange-600 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm hover:bg-orange-700 transition flex items-center gap-1 ${item.so_luong_ton === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                                        ${item.so_luong_ton === 0 ? 'disabled' : ''}>
                                    <i class="fas fa-plus"></i>
                                    <span class="hidden sm:inline">Th√™m</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Generate star rating HTML
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            
            let html = '';
            for (let i = 0; i < fullStars; i++) {
                html += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                html += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = 0; i < emptyStars; i++) {
                html += '<i class="far fa-star"></i>';
            }
            return html;
        }

        // Add to cart from recommended products
        async function addToCartFromRecommended(ma_mon) {
            if (typeof cartManager !== 'undefined') {
                await cartManager.addToCart(ma_mon, 1);
                // Reload cart and recommended products
                await loadAndRenderCart();
                await loadRecommendedProducts();
            } else {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè h√†ng');
                window.location.href = 'dang-nhap.html?redirect=gio-hang.html';
            }
        }

        // Load recommended products on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadRecommendedProducts();
        });
    </script>

    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
    <!-- Snow Effect -->
    <script src="js/snow-effect.js"></script>
    
    <!-- Cherry Blossom Effect -->
    <script src="js/cherry-blossom-effect.js"></script>
    
    <!-- Responsive Helper -->
    <script src="js/responsive-helper.js"></script>
</body>

</html>